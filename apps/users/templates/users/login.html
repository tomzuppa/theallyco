{% extends 'base.html' %}
{% load static %}

{% block title %}Login - BAOBYTE{% endblock %}

{% block extra_head %}
<!-- Linking the specific CSS file for login page -->
<link rel="stylesheet" href="{% static 'css/users/login.css' %}">
<!-- Google captcha -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endblock %}

{% block content %}
<section class="login-section">
  <div class="login-container d-flex">
    
    <!-- Left side: Image container (65% of the width) -->
    <div class="login-image-container">
      <img src="{% static 'img/login_page_img.jpg' %}" alt="Login image" class="login-image">
    </div>

    <!-- Right side: Form container (35% of the width) -->
    <div class="login-form-container d-flex align-items-center justify-content-center">
      
      <!-- Login Form -->
      <form method="post" action="{% url 'users:login' %}" class="login-form">
        {% csrf_token %}

        <!-- Title of the login form -->
        <h2 class="form-title">Welcome Back</h2>

          <!-- 🔴 Inline form errors (e.g. CAPTCHA not checked) -->
              {% if form.non_field_errors %}
              <div class="alert alert-danger text-center mt-2">
                {{ form.non_field_errors }}
              </div>
              {% endif %}

        <!-- Email input field -->
        <div class="form-group">
          <input type="email" name="username" class="form-control" placeholder="Email address" required>
        </div>

        <!-- Password input field with toggle visibility icon -->
        <div class="form-group position-relative">
          <input type="password" name="password" id="id_password" class="form-control" placeholder="Password" required>
          <span id="togglePassword" class="field-icon toggle-password">
            <i class="fas fa-eye"></i>
          </span>
        </div>

        <!-- Options: "Keep me signed in" checkbox + "Forgot password" link -->
        <div class="form-options d-flex justify-content-between">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="remember" name="remember">
            <label class="form-check-label" for="remember" title="Stay signed in for faster access next time" >Keep me signed in</label>
          </div>
          <a href="#" class="small-link">Forgot password?</a>
        </div>


         <!-- GOOGLE CAPTCHA START-->
         {% if show_recaptcha %}
         <div class="form-group d-flex justify-content-center mt-3 mb-3">
           <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key }}"></div>
         </div>
       {% endif %}
        
       
        <!-- Login button -->
        <button type="submit" class="btn btn-primary btn-block mt-4">Login</button>
        <!-- Link to the register page -->
        <div class="text-center mt-3">
          <span class="small-text">Don't have an account?</span>
          <a href="{% url 'users:register' %}" class="link-primary">Register</a>
        </div>

        
        <!-- 🌐 Google Login Button -->
        {% if enable_google_login %}
        <div class="d-grid gap-2 mt-3">
          <a href="{% url 'users:google_login' %}" class="btn btn-outline-info">
            <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" width="20" class="me-2">
            Login with Google
          </a>
        </div>
      {% endif %}


      </form>
      <!-- End of Login Form -->

    </div>
    <!-- End of Form container -->

  </div>
</section>
{% endblock %}

{% block extra_js %}
<!-- Linking the JavaScript file for login-specific interactions -->
<script src="{% static 'js/users_login/login.js' %}"></script>
{% endblock %}
