{% extends 'base.html' %}
{# ðŸ§± Inherits common structure (header, footer, scripts) from the base layout #}

{% load static %}
{# ðŸ“¦ Enables use of {% static %} tag to load CSS, JS, and images #}

{% load widget_tweaks %}
{# ðŸŽ¨ Allows dynamic class injection into form fields using filters like |add_class and |attr #}

{% block title %}Register | {{ COMPANY_NAME }} {% endblock %}
{# ðŸ§¾ Sets the browser tab title #}

{% block body_class %}register-page{% endblock %}
{# ðŸŽ¯ Adds a custom class to the body tag for page-specific styling #}

{% block extra_head %}
<!-- ðŸŽ¨ Register-specific CSS styling -->
<link rel="stylesheet" href="{% static 'css/users/register.css' %}">

<!-- ðŸ” Google reCAPTCHA script -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endblock %}




{% block content %}
<!-- ðŸ–¥ï¸ Register page main section -->
<section class="vh-100 d-flex align-items-center justify-content-center">
  <div class="container-fluid h-100">
    <div class="row d-flex align-items-center justify-content-center h-100">

      <!-- ðŸ”¶ LEFT: Marketing text block (only visible on md+ screens) -->
      <div class="col-md-6 text-light d-none d-md-block register-info text-center">
        <h1 class="fw-bold">
          <span class="headline-main">The best offer</span><br>
          <span class="headline-sub">for your business</span>
        </h1>
        <p class="text-muted paragraph-color fs-5 mt-4">
          Join the {{ COMPANY_NAME }}  platform and take your projects<br>
          to the next level. We care about security,<br>
          style, and performance.
        </p>
      </div>


      <!-- ðŸ”· RIGHT: Registration form block -->
      <div class="col-md-6">
        <div class="card register-card shadow">
          <div class="card-body p-4">
            <h2 class="text-center mb-4">Create Your Account</h2>

            <!-- ðŸ” User Registration Form -->
            <form method="post" action="{% url 'users:register' %}">
              {% csrf_token %}

              <!-- âš ï¸ Display non-field errors (like password mismatch) -->
              {% if form.non_field_errors %}
                <div class="alert alert-danger">{{ form.non_field_errors }}</div>
              {% endif %}

              <!-- ðŸ‘¥ First Name and Last Name fields (side-by-side) -->
              <div class="row mb-3">
                <div class="col">
                  {{ form.first_name|add_class:"form-control form-control-app"|attr:"placeholder:First Name" }}
                  {% if form.first_name.errors %}
                    <div class="text-danger small">{{ form.first_name.errors }}</div>
                  {% endif %}
                </div>
                <div class="col">
                  {{ form.last_name|add_class:"form-control form-control-app"|attr:"placeholder:Last Name" }}
                  {% if form.last_name.errors %}
                    <div class="text-danger small">{{ form.last_name.errors }}</div>
                  {% endif %}
                </div>
              </div>

              <!-- ðŸ§¾ Username field -->
              <div class="mb-3">
                {{ form.username|add_class:"form-control form-control-app"|attr:"placeholder:Username" }}
                {% if form.username.errors %}
                  <div class="text-danger small">{{ form.username.errors }}</div>
                {% endif %}
              </div>

              <!-- ðŸ“§ Email field -->
              <div class="mb-3">
                {{ form.email|add_class:"form-control form-control-app"|attr:"placeholder:Email" }}
                {% if form.email.errors %}
                  <div class="text-danger small">{{ form.email.errors }}</div>
                {% endif %}
              </div>

              <!-- ðŸ” Password field -->
              <div class="mb-3">
                {{ form.password1|add_class:"form-control form-control-app"|attr:"placeholder:Password" }}
                {% if form.password1.errors %}
                  <div class="text-danger small">{{ form.password1.errors }}</div>
                {% endif %}
              </div>

              <!-- ðŸ” Confirm Password field -->
              <div class="mb-3">
                {{ form.password2|add_class:"form-control form-control-app"|attr:"placeholder:Confirm Password" }}
                {% if form.password2.errors %}
                  <div class="text-danger small">{{ form.password2.errors }}</div>
                {% endif %}
              </div>

              <!-- ðŸ“œ Terms and Conditions acceptance -->
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" name="terms" id="terms" required>
                <label class="form-check-label small" for="terms">
                  I accept the <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a>
                </label>
              </div>

              <!-- GOOGLE reCAPTCHA -->
              <div class="form-group d-flex justify-content-center mt-3 mb-3">
                <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key }}"></div>
              </div>

              <!-- ðŸš€ Submit button -->
              <button type="submit" class="btn btn-primary-app w-100">
                Sign up
              </button>

              <!-- ðŸ” Link to login -->
              <div class="text-center mt-3">
                <a href="{% url 'users:login' %}" class="text-decoration-none text-info small">
                  Already have an account? Log in
                </a>
              </div>
            </form>
            <!-- ðŸ”š End of Form -->

          </div> <!-- end of card-body -->
        </div> <!-- end of card -->
      </div> <!-- end of right col -->

    </div> <!-- end of row -->
  </div> <!-- end of container -->
</section>
{% endblock %}



{% block extra_js %}
<!-- ðŸ“œ Terms and Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content bg-dark text-light border border-secondary">
      <div class="modal-header">
        <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- ðŸ“œ Main terms content -->
        <p><strong>1. Acceptance of Terms</strong><br>
        By creating an account or using our services, you accept and agree to be bound by these Terms and our Privacy Policy.</p>

        <p><strong>2. Use of Services</strong><br>
        You agree to use the platform solely for lawful purposes and not to violate any applicable laws or regulations.</p>

        <p><strong>3. User Responsibilities</strong><br>
        You are responsible for maintaining the confidentiality of your account and for all activities under your account.</p>

        <p><strong>4. Data Privacy</strong><br>
        Please refer to our Privacy Policy for details on how your information is collected, used, and protected.</p>

        <p><strong>5. Modifications</strong><br>
        We reserve the right to update these Terms and Conditions at any time without prior notice.</p>

        <p><strong>6. Termination</strong><br>
        We may suspend or terminate your access if you violate these Terms.</p>

        <p class="text-muted small mt-4">
          These Terms and Conditions are subject to change without notice. Last updated: May 2025.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}