{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %} {# 🔄 Allows dynamic styling of form fields via filters #}

{% block title %}Register | BAOBYTE{% endblock %}
{% block body_class %}register-page{% endblock %}

{% block extra_head %}
<!-- 🎨 Custom CSS for register page -->
<link rel="stylesheet" href="{% static 'css/users/register.css' %}">
<!-- Google reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endblock %}

{% block content %}
<!-- 🖥️ Register page main section -->
<section class="vh-100 d-flex align-items-center justify-content-center">
  <div class="container-fluid h-100">
    <div class="row d-flex align-items-center justify-content-center h-100">

      <!-- 🔶 LEFT: Marketing text block (only visible on md+ screens) -->
          <div class="col-md-6 text-light d-none d-md-block register-info text-center">
            <h1 class="fw-bold">
              <span class="headline-main">The best offer</span><br>
              <span class="headline-sub">for your business</span>
            </h1>
            <p class="text-muted paragraph-color fs-5 mt-4">
              Join the BAOBYTE platform and take your projects<br>
              to the next level. We care about security,<br>
              style, and performance.
            </p>
          </div>


      <!-- 🔷 RIGHT: Registration form block -->
      <div class="col-md-6">
        <div class="card register-card shadow">
          <div class="card-body p-4">
            <h2 class="text-center mb-4">Create Your Account</h2>

            <!-- 🔐 User Registration Form -->
            <form method="post" action="{% url 'users:register' %}">
              {% csrf_token %}

              <!-- ⚠️ Display non-field errors (like password mismatch) -->
              {% if form.non_field_errors %}
                <div class="alert alert-danger">{{ form.non_field_errors }}</div>
              {% endif %}

              <!-- 👥 First Name and Last Name fields (side-by-side) -->
              <div class="row mb-3">
                <div class="col">
                  {{ form.first_name|add_class:"form-control form-control-app" }}
                  {% if form.first_name.errors %}
                    <div class="text-danger small">{{ form.first_name.errors }}</div>
                  {% endif %}
                </div>
                <div class="col">
                  {{ form.last_name|add_class:"form-control form-control-app" }}
                  {% if form.last_name.errors %}
                    <div class="text-danger small">{{ form.last_name.errors }}</div>
                  {% endif %}
                </div>
              </div>

              <!-- 🧾 Username field -->
              <div class="mb-3">
                {{ form.username|add_class:"form-control form-control-app" }}
                {% if form.username.errors %}
                  <div class="text-danger small">{{ form.username.errors }}</div>
                {% endif %}
              </div>

              <!-- 📧 Email field -->
              <div class="mb-3">
                {{ form.email|add_class:"form-control form-control-app" }}
                {% if form.email.errors %}
                  <div class="text-danger small">{{ form.email.errors }}</div>
                {% endif %}
              </div>

              <!-- 🔐 Password field -->
              <div class="mb-3">
                {{ form.password1|add_class:"form-control form-control-app" }}
                {% if form.password1.errors %}
                  <div class="text-danger small">{{ form.password1.errors }}</div>
                {% endif %}
              </div>

              <!-- 🔐 Confirm Password field -->
              <div class="mb-3">
                {{ form.password2|add_class:"form-control form-control-app" }}
                {% if form.password2.errors %}
                  <div class="text-danger small">{{ form.password2.errors }}</div>
                {% endif %}
              </div>

              <!-- 📜 Terms and Conditions acceptance -->
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" name="terms" id="terms" required>
                <label class="form-check-label small" for="terms">
                  I accept the Terms and Conditions
                </label>
              </div>

              <!-- GOOGLE reCAPTCHA -->
              <div class="form-group d-flex justify-content-center mt-3 mb-3">
                <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key }}"></div>
              </div>

              <!-- 🚀 Submit button -->
              <button type="submit" class="btn btn-primary-app w-100">
                Sign up
              </button>

              <!-- 🔁 Link to login -->
              <div class="text-center mt-3">
                <a href="{% url 'users:login' %}" class="text-decoration-none text-info small">
                  Already have an account? Log in
                </a>
              </div>
            </form>
            <!-- 🔚 End of Form -->

          </div> <!-- end of card-body -->
        </div> <!-- end of card -->
      </div> <!-- end of right col -->

    </div> <!-- end of row -->
  </div> <!-- end of container -->
</section>
{% endblock %}
